- name: Install Music
  hosts: all
  vars:
    packages:
      - aria2
      - autojump
      - cmatrix
      - curl
      - dfc
      - dos2unix
      - fdupes
      - git
      - imagemagick
      - ipcalc
      - jhead
      - jq
      - lftp
      - mercurial
      - mtr
      - ncdu
      - ncmpcpp
      - nmap
      - p7zip
      - parallel
      - postgresql
      - pv
      - ranger
      - siege
      - testdisk
      - tmux
      - unrar
      - wget
      - youtube-dl
      - zsh
  tasks:
    - name: install packages on archlinux
      pacman: name={{ item }} state=latest
      with_items: packages
      when: ansible_distribution == "Archlinux"

    - name: Install packages on MacOSX
      homebrew: name={{ item }} state=latest
      with_items: packages
      when: ansible_distribution == "MacOSX"

    - name: Create directories
      file: path={{ item }} state=directory mode=0750
      with_items:
        - ~/.base16
        - ~/.gnupg
        - ~/.ipython/profile_default
        - ~/.parallel
        - ~/.ssh

    - name: Clone repositories
      git: repo={{ item.src }} dest={{ item.dest }} depth=1
      with_items:
        - { dest: "~/.oh-my-zsh", src: "https://github.com/robbyrussell/oh-my-zsh.git" }
        - { dest: "~/.config/base16-shell", src: "https://github.com/chriskempson/base16-shell" }

    - name: Make parallel silent
      command: touch ~/.parallel/will-cite
      args:
        creates: ~/.parallel/will-cite

    - name: Copy files
      copy: src={{ item.src }} dest={{ item.dest }} mode=0640
      with_items:
        - { src: files/terminal/base16-default.dark.sh, dest: ~/.base16/base16-default.dark.sh }
        - { src: files/terminal/base16-default.light.sh, dest: ~/.base16/base16-default.light.sh }
        - { src: files/terminal/gitconfig, dest: ~/.gitconfig }
        - { src: files/terminal/gpg-agent.conf, dest: ~/.gnupg/gpg-agent.conf }
        - { src: files/terminal/inputrc, dest: ~/.inputrc }
        - { src: files/terminal/ipython_config.py, dest: ~/.ipython/profile_default/ipython_config.py }
        - { src: files/terminal/psqlrc, dest: ~/.psqlrc }
        - { src: files/terminal/ssh_config, dest: ~/.ssh/ssh_config }
        - { src: files/terminal/tmux.conf, dest: ~/.tmux.conf }
        - { src: files/terminal/zshenv, dest: ~/.zshenv }
        - { src: files/terminal/zshrc, dest: ~/.zshrc }
